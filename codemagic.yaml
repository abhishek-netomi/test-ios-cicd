workflows:
  version_notify:
    name: Version Notify Pipeline
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: master
          include: true
          source: false
    scripts:
      - name: Echo Version
        script: |
          VERSION=$(cat VERSION 2>/dev/null || echo "1.0.0")
          echo "Version: $VERSION"
          echo $VERSION > version.txt
    artifacts:
      - version.txt
    notifications:
      - slack:
          channel: "sdk-release-updates"
          notify_on_build_start: false
          notify:
            success: true
            failure: true
          payload: |
            {
              "text": "Build finished for version: $(cat version.txt)"
            }